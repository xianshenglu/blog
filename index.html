<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Hey , you !">
<meta property="og:url" content="https://github.com/xianshenglu/blog/index.html">
<meta property="og:site_name" content="Hey , you !">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hey , you !">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://github.com/xianshenglu/blog/">





  <title>Hey , you !</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hey , you !</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/xianshenglu/blog/blog/2023/09/when-you-need-a-specific-chrome-version-to-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xianshenglu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hey , you !">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2023/09/when-you-need-a-specific-chrome-version-to-test/" itemprop="url">If you are still trying to find a specific chrome version</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-09-09T13:20:11+00:00">
                2023-09-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/browser/" itemprop="url" rel="index">
                    <span itemprop="name">browser</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Sometimes we need a specific chrome version to test because of </p>
<ul>
<li>the minimal supporting version </li>
<li>or customers’ feedback</li>
<li>…</li>
</ul>
<p>Sadly it’s not easy to find a real and safe chrome history version. As <a href="https://opensource.google/projects/chromium" target="_blank" rel="noopener">chromium</a> said</p>
<blockquote>
<p>Google does not offer old builds as they do not have up-to-date security fixes.</p>
</blockquote>
<p>Some people also don’t know where to find the future versions. So I write this article to note how to find these resources.</p>
<h3 id="Old-chrome"><a href="#Old-chrome" class="headerlink" title="Old chrome"></a>Old chrome</h3><p><strong>Non-official resources</strong></p>
<p>There’re some websites providing some old versions. But use it cautiously!</p>
<ul>
<li><a href="https://www.slimjet.com/chrome/google-chrome-old-version.php" target="_blank" rel="noopener">https://www.slimjet.com/chrome/google-chrome-old-version.php</a></li>
<li><a href="https://filehippo.com/download_google-chrome/history/" target="_blank" rel="noopener">https://filehippo.com/download_google-chrome/history/</a></li>
</ul>
<p><strong>Official chromium versions</strong></p>
<p>According to the <a href="https://opensource.google/projects/chromium" target="_blank" rel="noopener">chromium</a> document</p>
<blockquote>
<p>Chromium is the web browser that Google Chrome is built on.</p>
</blockquote>
<p>Normally you can reproduce the issues you met using the corresponding chromium version. </p>
<p>Chromium provides a way to download old builds. You can follow the steps listed in the <a href="https://www.chromium.org/getting-involved/download-chromium/#downloading-old-builds-of-chrome-chromium" target="_blank" rel="noopener">document</a>.</p>
<p>Another way is using <a href="https://mrseawave.github.io/chromium-history-page/" target="_blank" rel="noopener">chromium-history-page</a>. <strong>It’s not an official page, but it’ll redirect you to the official builds download page.</strong></p>
<p><img src="/blog/images/when-you-need-a-specific-chrome-version-to-test-image-1.png" alt="Alt text"></p>
<p>Then you can install the specific version to test.</p>
<h3 id="Future-Chrome-versions"><a href="#Future-Chrome-versions" class="headerlink" title="Future Chrome versions"></a>Future Chrome versions</h3><p>It’s quite easy to download the future versions. In the <a href="https://www.google.com/chrome/" target="_blank" rel="noopener">homepage</a>, you can find them and download them.</p>
<p><img src="/blog/images/when-you-need-a-specific-chrome-version-to-test-image-2.png" alt="Alt text"></p>
<p>Basically, they’re <code>beta</code>, <code>dev</code>, and <code>canary</code>. <code>beta</code> version is the next version, and also the version that developers are searching for when they need a future version.</p>
<p>Because chrome is distributed gradually. Some people’s browsers will be affected first. Developers might receive defects coming from customers because the experimental changes make their websites unavailable. And they can not reproduce on their own computer. </p>
<p>In this case, we can download the <code>beta</code> version and sometimes need to turn on some feature flags to reproduce the defects and fix them.</p>
<p>You can also see the release date, progress, and changes in the <a href="https://chromestatus.com/roadmap" target="_blank" rel="noopener">roadmap</a>.</p>
<p><img src="/blog/images/when-you-need-a-specific-chrome-version-to-test-image-3.png" alt="Alt text"></p>
<p>Okay, now you know where to download the old and future Chrome versions!</p>
<p><a href="https://github.com/xianshenglu/blog/issues/151"><strong>Issue</strong></a></p>
<p><a href="https://github.com/xianshenglu/blog/blob/master/source/_posts/when-you-need-a-specific-chrome-version-to-test.md"><strong>Source</strong></a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/xianshenglu/blog/blog/2023/09/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xianshenglu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hey , you !">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2023/09/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test/" itemprop="url">If you have no time to write tests, I'd recommend trying e2e test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-09-07T23:34:26+00:00">
                2023-09-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>It’s very common that developers don’t have time to write tests, especially unit tests. </p>
<p>In real-world apps, unit tests take lots of time so many teams give it up. Since they have given up the foundation of the test suit(unit test), they will also give up other tests. emmm……</p>
<p>Actually, investing time in e2e(end-to-end) tests can be a cost-effective choice, especially for web apps. The least time can help you solve the biggest problem. For example,</p>
<ul>
<li>I want to avoid displaying blank page in my website after the new release(Fatal bugs but only need the least time to avoid).</li>
<li>I want to reduce the high&#x2F;critical bugs in the testing phase or production environment(Important for the DEV&#x2F;QA team’s performance but only needs a little time to avoid)</li>
<li>I want to keep the core functions available in any case(Depending on how many core functions you want to cover you may need some time)</li>
</ul>
<p>Now, I’ll demo how to spend the least time to write an end-to-end test to solve the above problems.</p>
<h3 id="Choose-an-e2e-test-frameworks"><a href="#Choose-an-e2e-test-frameworks" class="headerlink" title="Choose an e2e test frameworks"></a>Choose an e2e test frameworks</h3><p>There’re many e2e test frameworks. I’ll compare them in another article, you can see a short comparison  via this graph. </p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-1.png" alt="Alt text"></p>
<p><em><a href="https://npmtrends.com/cypress-vs-playwright-vs-selenium-webdriver-vs-webdriverio" target="_blank" rel="noopener">source</a></em></p>
<p>Because <a href="https://medium.com/r/?url=https://playwright.dev/" target="_blank" rel="noopener">playwright</a> is very convenient to demo, I’ll choose this one in this article. </p>
<h3 id="Set-up-e2e-tests"><a href="#Set-up-e2e-tests" class="headerlink" title="Set up e2e tests"></a>Set up e2e tests</h3><p>I create the test project using <code>npm init playwright@latest</code>. Also, I installed <a href="https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright" target="_blank" rel="noopener">playwright vscode extension</a>. These are the files created by playwrite.</p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-2.png" alt="Alt text"></p>
<h3 id="Run-the-example-tests"><a href="#Run-the-example-tests" class="headerlink" title="Run the example tests"></a>Run the example tests</h3><p>Now, I’ll run the example test through the start button provided by the vscode extension.</p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-3.png" alt="Alt text"></p>
<p>You can see the browsers opened and the test passed.</p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-4.png" alt="Alt text"></p>
<p>You can also see the test results in many places.</p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-5.png" alt="Alt text"></p>
<h3 id="A-brief-conclusion"><a href="#A-brief-conclusion" class="headerlink" title="A brief conclusion"></a>A brief conclusion</h3><ul>
<li><p>As you can see, it’s extremely simple to run tests and see the running status(because the browser can be opened during the tests). </p>
</li>
<li><p>Also, in the example test, <strong>we only need 3 lines to verify that the target websites is available</strong> and not displaying a blank page to users. If we deploy the tests to the CI QA and end users will have much lower chances of meeting a blank page.</p>
</li>
</ul>
<p>You can also see the generated test reports. Please notice, we haven’t configured anything until now.</p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-6.png" alt="Alt text"><br><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-7.png" alt="Alt text"></p>
<h3 id="One-step-further"><a href="#One-step-further" class="headerlink" title="One step further"></a>One step further</h3><p>If <a href="https://playwright.dev/" target="_blank" rel="noopener">playwright homepage</a> is our own product, then we can summarize the core functions or smoke use cases</p>
<ol>
<li>The homepage should be available, not displaying a blank page.</li>
<li>click the <code>Docs</code> should go to the document page</li>
<li>The document page should display the correct document.</li>
</ol>
<p>Actually, there’re many remaining functions in the homepage, but the core functions are not too many. Since it’s a document website, the core function is that it is available and provides correct content. </p>
<p>If other functions are broken, it’s not that important. Even if found in the production environment, you may not be required to fix it urgently like in 1 hour.</p>
<p><strong>That’s the truth in reality, not everything has the same importance.</strong></p>
<p><strong>If you do have enough time, of course, you can cover more cases. In that case, I guess you’re also required to write unit tests.</strong></p>
<p>Anyway, based on my time budget and assumption, I’ll show you the code for the remaining test cases, less than 30 lines(including empty lines).</p>
<p><img src="/blog/images/if-you-have-no-time-to-write-tests-i-d-recommend-trying-e2e-test-image-8.png" alt="Alt text"></p>
<p>In real-world apps, to make element locating easier, we can add an attribute like <code>data-testid</code> in the testing element, then we can use something like </p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">await</span> page.getByTestId(<span class="string">'nav-docs'</span>).click();</span><br></pre></td></tr></table></figure>

<p>instead of </p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">await</span> page.locator(<span class="string">'.navbar__link'</span>).getByText(<span class="string">'Docs'</span>).click();</span><br></pre></td></tr></table></figure>

<p>to make writing e2e tests even easier.</p>
<h3 id="Last-words"><a href="#Last-words" class="headerlink" title="Last words"></a>Last words</h3><p>The only thing left now is to deploy the e2e test to your CI environment(Jenkins, Github Actions…). You can find the documents <a href="https://playwright.dev/docs/ci" target="_blank" rel="noopener">here</a>.</p>
<p>If we deploy the e2e tests to our CI, according to this case <strong>only 30 lines of code can ensure that each push ad merge will not break the core functions</strong>. The risk of breaking the core functions by code will be much lower.</p>
<p>Writing e2e tests can also help you write automation scripts to <strong>solve life problems</strong>, not just good for development works. </p>
<p>So, do you want to write some e2e tests now?</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/xianshenglu/blog/blog/2023/09/what-are-we-doing-when-we-are-changing-environment-variables/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xianshenglu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hey , you !">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2023/09/what-are-we-doing-when-we-are-changing-environment-variables/" itemprop="url">Differences between Node.js env and user environment variables</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-09-03T14:14:57+00:00">
                2023-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>We often use <code>process.env</code> to manage environment variables in front-end or Node.js projects.</p>
<h3 id="How-the-env-works-in-the-front-end"><a href="#How-the-env-works-in-the-front-end" class="headerlink" title="How the env works in the front-end"></a>How the env works in the front-end</h3><p>In lots of cases, we’re using <code>dotenv</code> or <code>cross-env</code> to manage environment variables.</p>
<p>If you check the source code of <a href="https://github.com/motdotla/dotenv"><code>dotenv</code></a>, you will find that it assigns all the defined env variables to the <code>process.env</code>.</p>
<p><img src="/blog/images/what-are-we-doing-when-we-are-changing-environment-variables-image.png" alt="Alt text"></p>
<p>According to the document of <a href="https://nodejs.org/dist/latest-v8.x/docs/api/process.html#process_process_env" target="_blank" rel="noopener">Node.js</a>.</p>
<blockquote>
<p>It is possible to modify this object(<code>process.env</code>), but <strong>such modifications will not be reflected outside the Node.js process</strong>.</p>
</blockquote>
<p>And <a href="https://github.com/kentcdodds/cross-env">cross-env</a> will pass the target env to <code>cross-spawn</code> to launch a child process.</p>
<p><img src="/blog/images/what-are-we-doing-when-we-are-changing-environment-variables-image-3.png" alt="Alt text"></p>
<p><img src="/blog/images/what-are-we-doing-when-we-are-changing-environment-variables-image-2.png" alt="Alt text"></p>
<blockquote>
<p>The <code>child_process.spawn()</code> method spawns a new process using the given command, with command line arguments in args.</p>
</blockquote>
<p>In conclusion, the env variables set by <code>dotenv</code> or <code>cross-env</code> are only visible in the running Node.js process.</p>
<p>But it doesn’t matter normally because the env is set in the same process as the app or the app is running in a child process with the target env.</p>
<p>Thus <strong>if you open the Windows system environment variable dialog when your app is running, you will not see the defined env</strong> because it’s out of the app process.</p>
<p>If you set env by <code>$env:TEST_ENV=dev</code> in PowerShell or <code>set TEST_ENV=dev</code> in cmd, you will not get the expected value in another shell or cmd by <code>$env:TEST_ENV</code> or <code>echo &quot;%TEST_ENV%&quot;</code>.</p>
<h3 id="Change-the-env-variable-like-editing-in-the-Windows-“environment-variable-dialog”"><a href="#Change-the-env-variable-like-editing-in-the-Windows-“environment-variable-dialog”" class="headerlink" title="Change the env variable like editing in the Windows “environment variable dialog”"></a>Change the env variable like editing in the Windows “environment variable dialog”</h3><p>If you want to do this, you can use <code>setx TEST_ENV dev</code> in Powershell or cmd. Then <strong>open a new process(not a new child process)</strong> you will get the new <code>TEST_ENV</code> value.</p>
<p>For example, if you change the env out of vscode, you need to restart the vscode. Otherwise, even if you open a new shell in the vscode, you still can’t see the new env value.</p>
<p>If you don’t want to restart vscode you can use <code>refreshenv</code> in the vscode powershell or cmd after installing <a href="https://chocolatey.org/install" target="_blank" rel="noopener">chocolatey</a>(<em>Package Manager for Windows</em>). For example,</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$env:TEST_ENV</span>  <span class="comment"># dev</span></span><br><span class="line">setx TEST_ENV prod</span><br><span class="line"><span class="variable">$env:TEST_ENV</span>  <span class="comment"># dev, not change</span></span><br><span class="line">refreshenv</span><br><span class="line"><span class="variable">$env:TEST_ENV</span> <span class="comment"># prod, changed</span></span><br></pre></td></tr></table></figure>

<p>Since we can use <code>setx</code> to set the env variable permanently, we can also let Node.js execute the <code>setx</code> command. For example,</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; spawnSync &#125; = <span class="built_in">require</span>(<span class="string">"child_process"</span>);</span><br><span class="line">spawnSync(<span class="string">'setx'</span>, [<span class="string">'-m'</span>, <span class="string">'TEST_ENV'</span>, <span class="string">'prod'</span>]);</span><br></pre></td></tr></table></figure>

<p>In the script,</p>
<blockquote>
<p>The <code>child_process.spawnSync()</code> method is generally identical to <code>child_process.spawn()</code> with the exception that the function will not return until the child process has fully closed.</p>
</blockquote>
<p><a href="https://github.com/xianshenglu/blog/issues/150"><strong>Issue</strong></a></p>
<p><a href="https://github.com/xianshenglu/blog/blob/master/source/_posts/what-are-we-doing-when-we-are-changing-environment-variables.md"><strong>Source</strong></a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/18/">18</a><a class="extend next" rel="next" href="/blog/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">xianshenglu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">54</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">142</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xianshenglu</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
